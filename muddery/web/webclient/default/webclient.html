<!DOCTYPE html>
{% load staticfiles %}
<html dir="ltr" lang="en">
  <head>
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximun-scale=1.0, user-scalable=no" />
    <meta charset="{{encoding}}" />

    <title>Muddery Webclient</title>

    <!--CSS style sheet -->
    <link rel="stylesheet" href="{% static "public/css/bootstrap.min.css" %}">
    <link rel="stylesheet" type="text/css" media="screen" href="{% static "webclient/css/webclient.css" %}">
    <!-- Importing the online jQuery javascript library -->
    <!--script src="http://code.jquery.com/jquery-1.6.1.js" type="text/javascript" charset="utf-8"></script-->
    <!--script src="http://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></script-->

    <!--for offline testing, download the jquery library from jquery.com-->
    <script src="{% static "public/js/jquery-1.11.1.min.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "public/js/jquery.cookie.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "public/js/bootstrap.min.js" %}"></script>
    <script src="{% static "public/js/d3.v3.min.js" %}" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        if(!window.jQuery){document.write("<div class='err'>jQuery library not found or the online version could not be reached.</div>");}
    </script>

    <!-- load settings -->
    <script src="{% static "webclient/js/settings.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/settings_default.js" %}" type="text/javascript" charset="utf-8"></script>

    <!-- load local strings -->
    <script src="{% static "webclient/js/local_string.js" %}" type="text/javascript" charset="utf-8"></script>
    <!-- load language file-->
    <script language="javascript" type="text/javascript">
        if ("language" in settings && settings.language != "") {
            document.write("\<script src=\"{% static "webclient/js/lang/" %}" + settings.language + "/strings.js\" type=\"text/javascript\" charset=\"utf-8\"\>\</script\>");
        }
    </script>

    {% if websocket_enabled %}
        <script language="javascript" type="text/javascript">
            if ("WebSocket" in window) {
                <!-- Importing the Muddery websocket webclient component (requires jQuery)  -->
                var wsurl = "ws://" + this.location.hostname + ":{{websocket_port}}";
                document.write("\<script src=\"{% static "webclient/js/evennia_websocket_webclient.js" %}\" type=\"text/javascript\" charset=\"utf-8\"\>\</script\>");
                document.write("\<script src=\"{% static "webclient/js/muddery_websocket_webclient.js" %}\" type=\"text/javascript\" charset=\"utf-8\"\>\</script\>");
            }
            else {
                <!-- No websocket support in browser. Importing the Muddery ajax webclient component (requires jQuery)  -->
                document.write("\<script src=\"{% static "webclient/js/evennia_ajax_webclient.js" %}\" type=\"text/javascript\" charset=\"utf-8\"\>\</script\>");
                document.write("\<script src=\"{% static "webclient/js/muddery_ajax_webclient.js" %}\" type=\"text/javascript\" charset=\"utf-8\"\>\</script\>");
            }
        </script>
    {% else %}
        <!-- websocket not enabled; use ajax -->
        <script src="{% static "webclient/js/evennia_ajax_webclient.js" %}" type="text/javascript" charset="utf-8"></script>
        <script src="{% static "webclient/js/muddery_ajax_webclient.js" %}" type="text/javascript" charset="utf-8"></script>

    {% endif %}

    <script src="{% static "webclient/js/muddery_webclient.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/muddery_webclient_uimgr.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/muddery_webclient_popupmgr.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/muddery_commands.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/muddery_combat.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/muddery_map.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/frame.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/text2html.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/data_handler.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/escape.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "webclient/js/utils.js" %}" type="text/javascript" charset="utf-8"></script>

  </head>
  <body>
    <div id="noscript">
      <h3>Javascript Error: The Muddery webclient requires that you have Javascript activated.</h3>
      <p>Turn off eventual script blockers and/or switch to a web
      browser supporting javascript.</p><p>For admins: The error
      could also be due to not being able to access the online
      jQuery javascript library. If you are testing the client
      without an internet connection, you have to previously
      download the jQuery library from http://code.jquery.com
      (it's just one file) and then edit webclient.html to point
      to the local copy.</p>
  </body>
</html>
